{% extends 'base.html.twig' %}

{% block title %}Liste des Instruments{% endblock %}

{% block body %}
    <h1>Liste des Instruments</h1>

    <table class="table table-hover"> {# J'ai ajouté table-hover pour un meilleur effet visuel #}
        <thead>
            <tr>
                <th>Id</th>
                {# On peut masquer l'ID et afficher l'image à la place, voir suggestions plus bas #}
                <th>Numéro de Série</th>
                <th>Marque</th>      {# NOUVELLE COLONNE #}
                <th>Type</th>        {# NOUVELLE COLONNE #}
                <th>Date d'achat</th>
                <th>Prix d'achat</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for instrument in instruments %}
            <tr>
                <td>{{ instrument.id }}</td>
                <td>{{ instrument.numSerie }}</td>
                {# On accède au libellé de la marque via l'objet instrument #}
                <td>{{ instrument.marque ? instrument.marque.libelle : 'N/A' }}</td>
                
                {# On fait de même pour le type d'instrument #}
                <td>{{ instrument.typeInstrument ? instrument.typeInstrument.libelle : 'N/A' }}</td>

                <td>{{ instrument.dateAchat ? instrument.dateAchat|date('d/m/Y') : '' }}</td> {# Format de date français #}
                <td>{{ instrument.prixAchat ? instrument.prixAchat|number_format(2, ',', ' ') ~ ' €' : '' }}</td> {# Formatage du prix #}
                <td>
                    <a href="{{ path('app_instrument_show', {'id': instrument.id}) }}" class="btn btn-info btn-sm">Voir</a>
                    <a href="{{ path('app_instrument_edit', {'id': instrument.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
                </td>
            </tr>
        {% else %}
            <tr>
                {# On met à jour le colspan pour correspondre au nouveau nombre de colonnes #}
                <td colspan="7" class="text-center">Aucun instrument trouvé.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_instrument_new') }}" class="btn btn-primary">Ajouter un nouvel instrument</a>
{% endblock %}