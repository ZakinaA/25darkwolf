{% extends 'base.html.twig' %}

{% block title %}Détail de l'Intervention #{{ intervention.id }}{% endblock %}

{% block body %}

<div class="show-container">
    <h1><i class="fa-solid fa-screwdriver-wrench"></i> Détail de l'Intervention #{{ intervention.id }}</h1>

    {# --- INFORMATIONS GÉNÉRALES --- #}
    <div class="info-grid">
        

        {# Prix #}
        <div class="info-item">
            <span class="info-label"><i class="fa-solid fa-euro-sign"></i> Prix</span>
            <span class="info-value">{{ intervention.prix|number_format(2, ',', ' ') }} €</span>
        </div>

        {# Quotité #}
        <div class="info-item">
            <span class="info-label"><i class="fa-solid fa-percent"></i> Quotité</span>
            <span class="info-value">{{ intervention.quotite }}</span>
        </div>

        {# Date Début #}
        <div class="info-item">
            <span class="info-label"><i class="fa-regular fa-calendar-plus"></i> Date Début</span>
            <span class="info-value">{{ intervention.dateDebut ? intervention.dateDebut|date('d/m/Y H:i') : 'N/A' }}</span>
        </div>

        {# Date Fin #}
        <div class="info-item">
            <span class="info-label"><i class="fa-regular fa-calendar-check"></i> Date Fin</span>
            <span class="info-value">{{ intervention.dateFin ? intervention.dateFin|date('d/m/Y H:i') : 'N/A' }}</span>
        </div>

        {# Descriptif (Pleine largeur) #}
        <div class="info-item" style="grid-column: 1 / -1;">
            <span class="info-label"><i class="fa-solid fa-align-left"></i> Descriptif</span>
            <span class="info-value" style="font-style: italic;">
                {{ intervention.descriptif ? intervention.descriptif|nl2br : 'Aucun descriptif fourni.' }}
            </span>
        </div>

    </div>

    {# --- SECTION INSTRUMENT --- #}
    {% if intervention.instrument %}
        {% set instrument = intervention.instrument %}
        
        <h3 style="color: #2c3e50; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px;">
            <i class="fa-solid fa-guitar"></i> Instrument concerné
        </h3>

        <div class="info-grid">
            <div class="info-item">
                <span class="info-label">Numéro de Série</span>
                <span class="info-value">{{ instrument.numSerie }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Type</span>
                <span class="info-value">
                    {{ instrument.typeInstrument ? instrument.typeInstrument.libelle : 'Non spécifié' }}
                </span>
            </div>
            <div class="info-item">
                <span class="info-label">Marque</span>
                <span class="info-value">
                    {{ instrument.marque ? instrument.marque.libelle : 'Non spécifiée' }}
                </span>
            </div>
        </div>

    {% else %}
        <div class="alert alert-danger" style="margin-top: 20px;">
            <i class="fa-solid fa-triangle-exclamation"></i> Aucun instrument lié à cette intervention.
        </div>
    {% endif %}

    {# --- ACTIONS --- #}
    <div class="actions">
        {# Bouton Retour #}
        <a href="{{ path('app_intervention_index') }}" class="btn-action btn-back">
            <i class="fa-solid fa-arrow-left"></i> Retour à la liste
        </a>

        {# Bouton Modifier #}
        <a href="{{ path('app_intervention_edit', {'id': intervention.id}) }}" class="btn-action btn-edit">
            <i class="fa-solid fa-pen-to-square"></i> Modifier
        </a>

        {# Bouton Supprimer #}
        {{ include('intervention/_delete_form.html.twig') }}
    </div>

</div>
{% endblock %}